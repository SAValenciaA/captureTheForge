
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>My Website</title>
  </head>
  <body>
    <h1>Puzzle: {{ puzzle.name }}</h1> <br />
    <p>{{ puzzle.description }}</p>
    <p>tags: {{ puzzle.tags }}</p>
    <p>dificulty: {{ puzzle.dificulty }}</p>
    {% if puzzle.extraFiles %}
      <a href="{{ url_for('download', filename=puzzle.extraFiles) }}" download>Download Files</a>
    {% endif %}

    <form id="flagForm">
      <input type="hidden" name="id" value="{{ puzzle.id }}" />
      <input type="text" name="flag" />
      <button type="submit" onclick="sendForm()">submit</button>
    </form>
    <script>

async function sendForm() {
    const form = document.getElementById("flagForm");
    const formData = new FormData(form);

    // Convert FormData â†’ plain object
    const payload = new URLSearchParams(formData).toString();

    try {
        const response = await fetch("/api/check_flag", {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded"
            },
            body: payload
        });

        const result = await response.json();

        // Show alert depending on the returned status
        if (result.status === "success") {
            alert("Success: " + result.message);
        } else {
            alert("Error: " + result.message);
        }

    } catch (error) {
        alert("Request failed: " + error);
    }
}
</script>

<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;

    /* DARK THEME */
    background: #1E1E1E;
    color: #E6E6E6;
    font-family: Arial, sans-serif;

    padding: 30px;
  }

  h1 {
    color: #A7C7E7;
    margin-bottom: 15px;
  }

  p {
    color: #E6E6E6;
    margin: 6px 0;
  }

  a {
    display: inline-block;
    margin-top: 12px;
    padding: 10px 14px;
    background: #2A2A2A;
    border: 1px solid #3A3A3A;
    border-radius: 8px;
    text-decoration: none;
    color: #A7C7E7;
    transition: 0.25s;
  }

  a:hover {
    background: #A7C7E7;
    color: #1E1E1E;
  }

  form {
    margin-top: 25px;
    display: flex;
    gap: 10px;
    align-items: center;
    background: #2A2A2A;
    border: 1px solid #3A3A3A;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0px 2px 6px rgba(0,0,0,0.5);
  }

  input[type="text"] {
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #3A3A3A;
    background: #1E1E1E;
    color: #E6E6E6;
    width: 220px;
    transition: 0.25s;
  }

  input[type="text"]:focus {
    outline: none;
    border-color: #A7C7E7;
    box-shadow: 0px 0px 6px rgba(167, 199, 231, 0.5);
  }

  button {
    padding: 10px 14px;
    border-radius: 8px;
    background: #A7C7E7;
    color: #1E1E1E;
    border: none;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
  }

  button:hover {
    background: #96B9DE;
  }
</style>
  </body>
</html>
